<!DOCTYPE html>
<html>
<head>
    <title>Algoritmo Johnson - Camino Crítico</title>
</head>
<body>
    <script>
        function hasDisconnectedNodes(matrix) {
            for (let i = 0; i < matrix.length; i++) {
                if (matrix[i].every(value => value === -1) && matrix.every(row => row[i] === -1)) {
                    return true;
                }
            }
            return false;
        }

        function johnsonCriticalPath(matrix) {
            const n = matrix.length;
            const dist = new Array(n).fill(0);

            for (let i = 0; i < n; i++) {
                for (let j = 0; j < n; j++) {
                    if (matrix[i][j] !== -1) {
                        dist[j] = Math.max(dist[j], dist[i] + matrix[i][j]);
                    }
                }
            }

            const criticalPath = [];
            let current = dist.indexOf(Math.max(...dist));

            while (current !== -1) {
                criticalPath.unshift(current + 1);
                let prev = -1;
                for (let i = 0; i < n; i++) {
                    if (matrix[i][current] !== -1 && dist[current] === dist[i] + matrix[i][current]) {
                        prev = i;
                        break;
                    }
                }
                current = prev;
            }

            return criticalPath;
        }

        const matrix = [
            [-1, 2, -1, -1, -1, -1, -1, -1, -1],
            [-1, -1, 6, 7, -1, -1, -1, -1, -1],
            [-1, -1, -1, 3, -1, -1, -1, -1, -1],
            [-1, -1, -1, -1, 4, -1, -1, -1, -1],
            [-1, -1, -1, -1, -1, 3, -1, -1, -1],
            [-1, -1, -1, -1, -1, -1, 2, -1, -1],
            [-1, -1, -1, -1, -1, -1, -1, 3, 6],
            [-1, -1, -1, -1, -1, -1, -1, -1, 1],
            [-1, -1, -1, -1, -1, -1, -1, -1, -1]
        ];

        if (hasDisconnectedNodes(matrix)) {
            console.log("Eliminar todos los nodos sueltos.");
        } else {
            const criticalPath = johnsonCriticalPath(matrix);
            console.log("Camino Crítico:", criticalPath);
        }



        const matrixWithDisconnectedNodes = [
    [-1, 2, -1, -1, -1, -1, -1],
    [-1, -1, 6, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1]
];
if (hasDisconnectedNodes(matrixWithDisconnectedNodes)) {
            console.log("Eliminar todos los nodos sueltos.");
        } else {
            const criticalPath = johnsonCriticalPath(matrix);
            console.log("Camino Crítico:", criticalPath);
        }
    </script>
</body>
</html>
